<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil</title>
    <link rel="stylesheet" href="./Estilização/style.css">
</head>
<body onload="mostrar()">
    <div class="header">
        <h1 class="title">LOGO DO WEBSITE</h1>
        <ul class="navbar">
            <li> <a href="livros.html">Livros</a> </li>
            <li> | </li>
            <li> <a href="quiz.html">Quiz</a> </li>
            <li> | </li>
            <li> <a href="dashboard.html">Dashboard</a> </li>
            <li> | </li>
            <li class="atual"> <a href="perfil.html">Perfil</a> </li>
            <li> | </li>
            <li> <a href="index.html">Sair</a> </li>
        </ul>
    </div>
    <div class="background centro">
        <div class="tela_perfil">
            <div class="imagens_perfil">
                <img id="img_perfil" src="" class="perfil">
                <button onclick="mostrar_imagens()">Trocar foto de perfil</button>
                <div class="lista_imagens" id="imagens">
                    <img onclick="trocar(this.id, this.src)" id="1" src="Imagens/Luke.png">
                    <img onclick="trocar(this.id, this.src)" id="2" src="Imagens/Boba_Fett.png">
                    <img onclick="trocar(this.id, this.src)" id="3" src="Imagens/C3PO.png">
                    <img onclick="trocar(this.id, this.src)" id="4" src="Imagens/Thrawn.png">
                    <img onclick="trocar(this.id, this.src)" id="5" src="Imagens/Darth_Vader.png">
                    <img onclick="trocar(this.id, this.src)" id="6" src="Imagens/Joruus_C_Baoth.png">
                    <img onclick="trocar(this.id, this.src)" id="7" src="Imagens/Leia.png">
                    <img onclick="trocar(this.id, this.src)" id="8" src="Imagens/Darth_Revan.png">
                    <img onclick="trocar(this.id, this.src)" id="9" src="Imagens/Yoda.png">
                </div>
            </div>
            <h1>Nome: <span id="nome_user"></span> <br> <br>
                E-mail: <span id="email_user"></span> </h1>
        </div>
    </div>
    <div class="footer">
        <h1 class="title">LOGO DO WEBSITE</h1>
        <div class="contato">
            <h2>Entre em contato:</h2>
            <div class="lista_contatos">
                <h3>&phone; (11) 96574-9168</h3>
                <h3>&#9993; bruno.ytakahashi@sptech.school</h3>
            </div>
        </div>
    </div>
</body>
</html>

<script>
    function mostrar_imagens() {
        imagens.style.display = "block";
    }

    function mostrar() {
        var email = sessionStorage.EMAIL_USUARIO;
        var nome = sessionStorage.NOME_USUARIO;
        var foto = sessionStorage.CAMINHO_FOTO;
        console.log(foto);

        var nome_user = document.getElementById("nome_user");
        var email_user = document.getElementById("email_user");
        var perfil = document.getElementById("img_perfil");

        if (email != null && nome != null && foto != null) {
            nome_user.innerHTML = nome;
            email_user.innerHTML = email;
            perfil.src = foto;
        }/* else {
            window.location = "../login.html";
        }*/
    }

    function trocar(id, src) {
        img_perfil.src = src;
        sessionStorage.CAMINHO_FOTO = src;
        imagens.style.display = "none";
        var idFoto = id;
        var id_user = sessionStorage.ID_USUARIO;

        fetch("/perfil/trocar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                fotoServer: idFoto,
                idServer: id_user
            }),
            })
            .then(function (resposta) {
                console.log("resposta: ", resposta);
            })
            .catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
            });

            return false;
    }
</script>